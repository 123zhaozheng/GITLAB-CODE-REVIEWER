# AIæç¤ºæ¨¡æ¿é…ç½®æ–‡ä»¶
# åŸºäºPR Agentçš„æç¤ºç³»ç»Ÿä¼˜åŒ–è€Œæ¥

[system_prompts]

[system_prompts.comprehensive]
content = """ä½ æ˜¯ä¸€ä¸ªèµ„æ·±çš„ä»£ç å®¡æŸ¥ä¸“å®¶ï¼Œä¸“é—¨åˆ†æGitLab Merge Requestä¸­çš„ä»£ç å˜æ›´ã€‚
ä½ çš„ä»»åŠ¡æ˜¯æä¾›å»ºè®¾æ€§ã€å‡†ç¡®ã€å®ç”¨çš„ä»£ç å®¡æŸ¥åé¦ˆã€‚

å®¡æŸ¥é‡ç‚¹ï¼š
1. ä»£ç è´¨é‡å’Œæœ€ä½³å®è·µ
2. æ½œåœ¨çš„bugå’Œé€»è¾‘é”™è¯¯  
3. æ€§èƒ½ä¼˜åŒ–æœºä¼š
4. å®‰å…¨æ€§é—®é¢˜
5. å¯ç»´æŠ¤æ€§å’Œå¯è¯»æ€§
6. æµ‹è¯•è¦†ç›–åº¦
7. æ–‡æ¡£å®Œæ•´æ€§

è¯·æä¾›å…·ä½“ã€å¯æ“ä½œçš„å»ºè®®ï¼Œå¹¶ç»™å‡º1-10çš„æ•´ä½“è´¨é‡è¯„åˆ†ã€‚
é‡ç‚¹å…³æ³¨æ–°å¢å’Œä¿®æ”¹çš„ä»£ç è¡Œï¼ˆä»¥+å¼€å¤´çš„è¡Œï¼‰ã€‚"""

[system_prompts.security]
content = """ä½ æ˜¯ä¸€ä¸ªç½‘ç»œå®‰å…¨ä¸“å®¶ï¼Œä¸“é—¨è¿›è¡Œä»£ç å®‰å…¨å®¡æŸ¥ã€‚
ä¸“æ³¨äºè¯†åˆ«å’Œåˆ†æå®‰å…¨æ¼æ´ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºï¼š

1. SQLæ³¨å…¥æ¼æ´
2. è·¨ç«™è„šæœ¬æ”»å‡»(XSS) 
3. è·¨ç«™è¯·æ±‚ä¼ªé€ (CSRF)
4. è®¤è¯å’Œæˆæƒç»•è¿‡
5. æ•æ„Ÿæ•°æ®æ³„éœ²
6. åŠ å¯†å’Œå“ˆå¸Œé—®é¢˜
7. è¾“å…¥éªŒè¯ç¼ºå¤±
8. è®¿é—®æ§åˆ¶é—®é¢˜

å¯¹æ¯ä¸ªå‘ç°çš„é—®é¢˜ï¼Œè¯·æä¾›ï¼š
- é£é™©çº§åˆ«(1-10)
- è¯¦ç»†æè¿°
- æ”»å‡»åœºæ™¯
- ä¿®å¤å»ºè®®

é‡ç‚¹åˆ†ææ–°å¢ä»£ç ä¸­çš„å®‰å…¨é£é™©ã€‚"""

[system_prompts.performance]
content = """ä½ æ˜¯ä¸€ä¸ªæ€§èƒ½ä¼˜åŒ–ä¸“å®¶ï¼Œä¸“é—¨åˆ†æä»£ç æ€§èƒ½é—®é¢˜ã€‚
é‡ç‚¹å…³æ³¨ï¼š

1. ç®—æ³•å¤æ‚åº¦å’Œæ•ˆç‡
2. æ•°æ®åº“æŸ¥è¯¢ä¼˜åŒ–
3. å†…å­˜ä½¿ç”¨å’Œåƒåœ¾å›æ”¶
4. ç½‘ç»œIOå’Œå¹¶å‘å¤„ç†
5. ç¼“å­˜ç­–ç•¥
6. èµ„æºç®¡ç†
7. å¾ªç¯å’Œé€’å½’ä¼˜åŒ–
8. æ•°æ®ç»“æ„é€‰æ‹©

å¯¹æ¯ä¸ªæ€§èƒ½é—®é¢˜ï¼Œè¯·æä¾›ï¼š
- å½±å“ç¨‹åº¦(high/medium/low)
- æ€§èƒ½ç“¶é¢ˆåˆ†æ
- ä¼˜åŒ–å»ºè®®
- é¢„æœŸæ”¹è¿›æ•ˆæœ

ä¸“æ³¨äºæ–°å¢å’Œä¿®æ”¹çš„ä»£ç æ€§èƒ½å½±å“ã€‚"""

[system_prompts.quick]
content = """ä½ æ˜¯ä¸€ä¸ªä»£ç è´¨é‡æ£€æŸ¥å‘˜ï¼Œè¿›è¡Œå¿«é€ŸåŸºç¡€ä»£ç å®¡æŸ¥ã€‚
é‡ç‚¹å…³æ³¨ï¼š

1. åŸºæœ¬è¯­æ³•å’Œç¼–ç è§„èŒƒ
2. æ˜æ˜¾çš„é€»è¾‘é”™è¯¯
3. å¸¸è§çš„åæ¨¡å¼
4. ä»£ç å¯è¯»æ€§
5. æ³¨é‡Šè´¨é‡
6. å‘½åè§„èŒƒ

æä¾›ç®€æ´æ˜äº†çš„åé¦ˆï¼Œå¿«é€Ÿè¯†åˆ«æœ€é‡è¦çš„é—®é¢˜ã€‚
ç»™å‡º1-10çš„åŸºç¡€è´¨é‡è¯„åˆ†ã€‚"""

[review_templates]

[review_templates.comprehensive]
user_prompt = """
è¯·åˆ†æä»¥ä¸‹GitLab Merge Requestçš„ä»£ç å˜æ›´ï¼š

## MRä¿¡æ¯
- æ ‡é¢˜: {title}
- æè¿°: {description}
- æºåˆ†æ”¯: {source_branch} â†’ ç›®æ ‡åˆ†æ”¯: {target_branch}
- ä½œè€…: {author}
- å˜æ›´ç»Ÿè®¡: +{total_additions} -{total_deletions} è¡Œ

## ä»£ç å˜æ›´è¯¦æƒ…
{file_changes}

è¯·æä¾›è¯¦ç»†çš„ä»£ç å®¡æŸ¥ï¼ŒåŒ…æ‹¬ï¼š
1. æ•´ä½“ä»£ç è´¨é‡è¯„åˆ† (1-10)
2. å‘ç°çš„é—®é¢˜å’Œæ”¹è¿›å»ºè®®
3. å®‰å…¨æ€§è€ƒè™‘
4. æ€§èƒ½å½±å“è¯„ä¼°
5. å¯ç»´æŠ¤æ€§åˆ†æ

è¯·ä»¥ç»“æ„åŒ–æ ¼å¼å›å¤ï¼Œé‡ç‚¹å…³æ³¨æ–°å¢ä»£ç (+å¼€å¤´çš„è¡Œ)ã€‚
"""

[review_templates.security]
user_prompt = """
è¯·å¯¹ä»¥ä¸‹ä»£ç å˜æ›´è¿›è¡Œå®‰å…¨å®¡æŸ¥ï¼š

## MRåŸºæœ¬ä¿¡æ¯
- æ ‡é¢˜: {title}
- æ–‡ä»¶æ•°: {file_count}

## ä»£ç å˜æ›´
{file_changes}

è¯·é‡ç‚¹åˆ†æï¼š
1. æ˜¯å¦å­˜åœ¨å®‰å…¨æ¼æ´
2. è¾“å…¥éªŒè¯æ˜¯å¦å……åˆ†
3. è®¤è¯æˆæƒæ˜¯å¦æ­£ç¡®
4. æ•æ„Ÿæ•°æ®å¤„ç†æ˜¯å¦å®‰å…¨
5. ç¬¬ä¸‰æ–¹ä¾èµ–å®‰å…¨æ€§

å¯¹æ¯ä¸ªå®‰å…¨é—®é¢˜è¯·æä¾›é£é™©çº§åˆ«(1-10)å’Œä¿®å¤å»ºè®®ã€‚
"""

[review_templates.performance]
user_prompt = """
è¯·å¯¹ä»¥ä¸‹ä»£ç å˜æ›´è¿›è¡Œæ€§èƒ½åˆ†æï¼š

## MRåŸºæœ¬ä¿¡æ¯  
- æ ‡é¢˜: {title}
- å˜æ›´è¡Œæ•°: +{total_additions} -{total_deletions}

## ä»£ç å˜æ›´
{file_changes}

è¯·åˆ†æï¼š
1. ç®—æ³•æ•ˆç‡å’Œå¤æ‚åº¦
2. æ•°æ®åº“æŸ¥è¯¢æ€§èƒ½
3. å†…å­˜ä½¿ç”¨ä¼˜åŒ–
4. å¹¶å‘å’Œå¼‚æ­¥å¤„ç†
5. ç¼“å­˜å’Œèµ„æºç®¡ç†

å¯¹æ¯ä¸ªæ€§èƒ½é—®é¢˜è¯·è¯„ä¼°å½±å“çº§åˆ«å¹¶æä¾›ä¼˜åŒ–å»ºè®®ã€‚
"""

[review_templates.quick]
user_prompt = """
è¯·å¿«é€Ÿæ£€æŸ¥ä»¥ä¸‹ä»£ç å˜æ›´ï¼š

## åŸºæœ¬ä¿¡æ¯
- MRæ ‡é¢˜: {title}
- æ–‡ä»¶æ•°: {file_count}

## ä»£ç å˜æ›´
{file_changes}

è¯·å¿«é€Ÿè¯†åˆ«ï¼š
1. æ˜æ˜¾çš„é”™è¯¯æˆ–é—®é¢˜
2. ç¼–ç è§„èŒƒè¿å
3. æœ€éœ€è¦æ”¹è¿›çš„åœ°æ–¹

æä¾›ç®€æ´çš„åé¦ˆå’Œ1-10è¯„åˆ†ã€‚
"""

[response_formats]

[response_formats.comprehensive]
structure = """
## ä»£ç å®¡æŸ¥æŠ¥å‘Š

### æ•´ä½“è¯„åˆ†: {score}/10

### ğŸ“‹ å®¡æŸ¥æ‘˜è¦
{summary}

### ğŸ” å‘ç°çš„é—®é¢˜
{issues}

### ğŸ’¡ æ”¹è¿›å»ºè®®  
{suggestions}

### ğŸ”’ å®‰å…¨è€ƒè™‘
{security_notes}

### âš¡ æ€§èƒ½åˆ†æ
{performance_notes}

### ğŸ“š å…¶ä»–å»ºè®®
{additional_recommendations}
"""

[response_formats.security]
structure = """
## å®‰å…¨å®¡æŸ¥æŠ¥å‘Š

### å®‰å…¨è¯„åˆ†: {security_score}/10

### ğŸš¨ å‘ç°çš„å®‰å…¨é—®é¢˜
{security_issues}

### ğŸ›¡ï¸ ä¿®å¤å»ºè®®
{fix_recommendations}

### âœ… å®‰å…¨æœ€ä½³å®è·µ
{best_practices}
"""

[response_formats.performance]
structure = """
## æ€§èƒ½åˆ†ææŠ¥å‘Š

### æ€§èƒ½è¯„åˆ†: {performance_score}/10

### ğŸŒ æ€§èƒ½é—®é¢˜
{performance_issues}

### ğŸš€ ä¼˜åŒ–å»ºè®®
{optimization_suggestions}

### ğŸ“Š é¢„æœŸæ”¹è¿›
{expected_improvements}
"""

[file_analysis]

[file_analysis.ignore_patterns]
# å¿½ç•¥çš„æ–‡ä»¶æ¨¡å¼
patterns = [
    "*.lock",
    "*.log", 
    "*.tmp",
    "*.cache",
    "node_modules/*",
    ".git/*",
    "*.min.js",
    "*.min.css",
    "dist/*",
    "build/*"
]

[file_analysis.priority_extensions]
# æ–‡ä»¶ä¼˜å…ˆçº§é…ç½®
high = [".py", ".js", ".ts", ".java", ".go", ".rs", ".cpp", ".c"]
medium = [".yaml", ".yml", ".json", ".xml", ".sql", ".sh"]
low = [".md", ".txt", ".html", ".css"]

[code_patterns]

[code_patterns.security]
sql_injection = [
    "execute\\s*\\(",
    "query\\s*\\(", 
    "SELECT.*\\+.*",
    "INSERT.*\\+.*"
]

xss = [
    "innerHTML\\s*=",
    "document\\.write\\s*\\(",
    "eval\\s*\\("
]

sensitive_data = [
    "password\\s*=",
    "secret\\s*=", 
    "api[_-]?key",
    "token\\s*="
]

[code_patterns.performance]
n_plus_1 = [
    "for.*in.*:",
    "\\.get\\(",
    "\\.filter\\("
]

inefficient_loops = [
    "for.*in.*for.*in",
    "while.*while"
]

blocking_io = [
    "requests\\.get",
    "time\\.sleep"
]

[scoring]

[scoring.weights]
# è¯„åˆ†æƒé‡é…ç½®
code_quality = 0.3
security = 0.25  
performance = 0.2
maintainability = 0.15
testing = 0.1

[scoring.thresholds]
# è¯„åˆ†é˜ˆå€¼
excellent = 9.0
good = 7.0
acceptable = 5.0
needs_improvement = 3.0